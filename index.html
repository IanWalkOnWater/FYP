<!DOCTYPE HTML>
<html>
    <head>
        <link rel="shortcut icon" href="http://learn.lboro.ac.uk/theme/image.php/lboro2/theme/1416506521/favicon" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Electronic Marking</title>

        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="js/highcharts.js"></script>
<script src="js/data.js"></script>
<script src="js/drilldown.js"></script>
        
    </head>
    <body>

    <div id="header" class="page-header">
        <ul>
            <li>Home</li>
            <li>My Modules</li>
            <li>Reports</li>    
        </ul>    
    </div>    

    <br/>
    
    <canvas width="10000" height="1000" id="myCanvas"></canvas>
    <div id="container1" style="height: 300px"></div>
    <div id="container2" style="height: 300px; width: 600px; margin: 0 auto"></div>

    </body>

    <script type="text/javascript">

    // Internationalization
Highcharts.setOptions({
    lang: {
        drillUpText: ' Back to {series.name}'
    }
});

var options = {
    credits:{enabled:false},
    
    chart: {
        height: 300
    },
    
    title: {
        text: 'Highcharts Drilldown Plugin'
    },

    xAxis: {
        categories: true
    },
    
    drilldown: {
        series: [{
            id: 'parta',
            name: 'Part A',
            data: [
                ['Server Side Programming', 80],
                ['Object Orientated Prgramming', 75],
                ['Mathematics', 68],
                ['Databases', 68]
            ]
        }, {
            id: 'partb',
            name: 'Part B',
            data: [{
                name: 'Team Projects', 
                y: 72,
                drilldown: 'team_projects_cw'
            },
            ['2D Graphics', 83],
            ['Formal Specification', 60]
            ]
        }, {
            id: 'team_projects_cw',
            name: 'Tasks',
            data: [
                ['Task 1', 5],
                ['Task 2', 15],
                ['Task 3', 10],
            ]
        }]
    },
    
    legend: {
        enabled: false
    },
    
    plotOptions: {
        series: {
            dataLabels: {
                enabled: true
            },
            shadow: false
        },
        pie: {
            size: '80%'
        }
    },
    
    series: [{
        name: 'Overview',
        colorByPoint: true,
        data: [{
            name: 'Part A',
            y: 75,
            drilldown: 'parta'
        }, {
            name: 'Part B',
            y: 69,
            drilldown: 'partb'
        }, {
            name: 'Part C',
            y: 1
        }]
    }]
};

// Column chart
//options.chart.renderTo = 'container1';
//options.chart.type = 'column';
//var chart1 = new Highcharts.Chart(options);

// Pie
options.chart.renderTo = 'container2';
options.chart.type = 'pie';
var chart2 = new Highcharts.Chart(options);





function drawBarChart ( dataArray, 
                            dataLabelArray, 
                            barWidth, 
                            canvasHeight,
                            canvas) 
    {     
      var dataValue = 0;
      var xposition = 0;
      var spaceBetweenBars = 70;

      
      canvas.height = canvasHeight;
      var context = canvas.getContext('2d');

      for( var i =0; i< dataArray.length; i++)
      {
        dataValue = dataArray[i];
        context.beginPath();
        xposition = xposition + (spaceBetweenBars);
        console.log(xposition);
        yposition = (canvasHeight - Number(dataArray[i]) - 20) ;
        console.log( yposition + " y");
        context.rect(xposition, yposition, barWidth, dataValue); // X-pos, Y-Pos ( from top), width, height
        context.fillStyle = 'yellow';
        context.fill();
        context.lineWidth = 7;
        context.strokeStyle = 'black';
        context.stroke();

        context.fillStyle = "black";
        context.font = 'italic 10pt Calibri';
        context.fillText( dataValue, xposition, yposition - 20);
        //console.log(dataLabelArray.length + "," + dataArray.);
        if( dataArray.length == dataLabelArray.length)
        {
          context.font = 'italic 15pt Calibri';
          context.fillText( dataLabelArray[i], xposition, yposition + dataValue + 20);

        }  
      
      }; // End of For
     }  

     var dataArray = [65, 66, 80, 41, 75];
      var dataLabelArray = ["A", "B", "C", "D", "E"];
      var barWidth = 50;
      var canvasHeight = 200;
      var canvas = document.getElementById('myCanvas');
     drawBarChart( dataArray, 
                            dataLabelArray, 
                            barWidth, 
                            canvasHeight,
                            canvas); 


        </script>
</html>
